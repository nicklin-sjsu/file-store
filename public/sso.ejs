<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<title>File Store</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
</head>

<body class="p-3 m-0 border-0 bd-example" style="background-image: url('background1.jpg'); background-repeat: no-repeat; background-attachment: fixed; background-size: cover;">
	<div class="card mx-auto p-3 w-25 opacity-75" style=" margin-top: 150px">
        <h1 class="mx-auto pb-2" style="font-family: 'Brush Script MT', cursive;">File Store</h1>
		<ul class="nav nav-pills nav-fill">
			<li class="nav-item">
				<a class="nav-link active" id="tab-signin" aria-current="pills-signin" onclick="switchTab('signin');" href="#">Login</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="tab-signup" onclick="switchTab('signup');" href="#">Register</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="pills-signin" role="tabpanel" aria-labelledby="tab-signin">
				<div class="text-center mb-3">
					<p class="mt-3">Sign in with:</p>
                    <button type="button" class="btn btn-link btn-floating mx-1">
                        <i class="bi bi-facebook"></i>
                    </button>

					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-google"></i>
					</button>

					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-twitter"></i>
					</button>

					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-github"></i>
					</button>
				</div>

				<p class="text-center">or:</p>
				<form action="/signin" method="post">
					<!-- Email input -->
					<% if (messages.error) { %>
					<div class='alert alert-danger' role='alert'>
						<%= messages.error %>
					</div>
					<% } %>

					<div class="form-outline mb-4">
						<label class="form-label" for="signinEmail">Email</label>
						<input type="email" name="signinEmail" id="signinEmail" class="form-control" />
					</div>

					<!-- Password input -->
					<div class="form-outline mb-4">
						<label class="form-label" for="signinPassword">Password</label>
						<input type="password" name="signinPassword" id="signinPassword" class="form-control" />
					</div>

					<!-- Submit button -->
					<button type="submit" class="btn btn-primary btn-block mb-4">Sign in</button>
				</form>
			</div>
			<div class="tab-pane" id="pills-signup" role="tabpanel" aria-labelledby="tab-signup">
				<div class="text-center mb-3">
					<p class="mt-3">Sign up with:</p>
					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-facebook"></i>
					</button>

					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-google"></i>
					</button>

					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-twitter"></i>
					</button>

					<button type="button" class="btn btn-link btn-floating mx-1">
						<i class="bi bi-github"></i>
					</button>
				</div>

				<p class="text-center">or:</p>

				<!-- Name input -->
				<div class="form-outline mb-4">
					<label class="form-label" for="signupFirstName">First Name</label>
					<input type="text" id="signupFirstName" class="form-control" />
				</div>

				<!-- Name input -->
				<div class="form-outline mb-4">
					<label class="form-label" for="signupLastName">Last Name</label>
					<input type="text" id="signupLastName" class="form-control" />
				</div>

				<!-- Email input -->
				<div class="form-outline mb-4">
					<label class="form-label" for="signupEmail">Email</label>
					<input type="email" id="signupEmail" class="form-control" />
				</div>

				<!-- Password input -->
				<div class="form-outline mb-4">
					<label class="form-label" for="signupPassword">Password</label>
					<input type="password" id="signupPassword" class="form-control" />
				</div>

				<!-- Repeat Password input -->
				<div class="form-outline mb-4">
					<label class="form-label" for="signupRepeatPassword">Repeat password</label>
					<input type="password" id="signupRepeatPassword" class="form-control" />
				</div>

				<!-- Checkbox -->
				<div class="form-check d-flex mb-4">
					<input class="form-check-input me-2" type="checkbox" value="" id="signupCheck"
							aria-describedby="signupCheckHelpText" />
					<label class="form-check-label" for="signupCheck">
						I have read and agree to the terms
					</label>
				</div>

				<!-- Submit button -->
				<button type="button" class="btn btn-primary btn-block mb-3" onclick="signup()">Register</button>
			</div>
		</div>
		<!-- Pills content -->
	</div>
</body>
<script type="text/javascript">
	function switchTab(tabName) {
        var signinBtn = document.getElementById("tab-signin");
        var signupBtn = document.getElementById("tab-signup");
        var signinTab = document.getElementById("pills-signin");
        var signupTab = document.getElementById("pills-signup");
		if (tabName == 'signin') {
			signupTab.classList.remove("active");
			signinTab.classList.add("active");
            signupBtn.classList.remove("active");
            signinBtn.classList.add("active");
		} else if (tabName == 'signup') {
			signinTab.classList.remove("active");
			signupTab.classList.add("active");
            signinBtn.classList.remove("active");
            signupBtn.classList.add("active");
		}
	}

	//function signin() {
	//	var email = document.getElementById('signinEmail').value;
	//	var password = document.getElementById('signinPassword').value;
	//	var rememberMe = document.getElementById('signinCheck').value;
	//	if (!email) {
	//		alert("Please input your email");
	//	} else if (!password) {
	//		alert("Please input your password");
	//	} else {
	//		fetch("/signin", {
	//			method: "POST",
	//			headers: {
	//				'Content-Type': 'application/json'
	//			},
	//			body : JSON.stringify({email: email, password: password})
	//		})
	//		.then((response) => response.json())
	//		.then((res) => {
	//			if (res.code == 200) {
	//				location.reload();
	//			} else {
 //                   alert(res.message);
	//			}
	//		})
	//		.catch(console.error);
	//	}
	//}
	function signup() {
		var first_name = document.getElementById('signupFirstName').value;
		var last_name = document.getElementById('signupLastName').value;
		var email = document.getElementById('signupEmail').value;
		var password = document.getElementById('signupPassword').value;
		var signupRepeatPassword = document.getElementById('signupRepeatPassword').value;
		var signupCheck = document.getElementById('signupCheck').checked;
		if (!first_name) {
			alert("Please input your first name");
		} else if (!last_name) {
			alert("Please input your last name");
		} else if (!email) {
			alert("Please input your email");
		} else if (!password) {
			alert("Please input your password");
		} else if (password != signupRepeatPassword) {
			alert("Passwords do not match");
		} else if (!signupCheck) {
			alert("Please agree to the terms");
		} else {
			fetch("/signup", {
				method: "POST",
				headers: {
					'Content-Type': 'application/json'
				},
				body : JSON.stringify({first_name: first_name, last_name: last_name, email: email,
				password: password})
			})
			.then((response) => response.json())
			.then((res) => {
				if (res.code == 200) {
					alert(res.message);
                    switchTab('signin');
				} else {
                    alert(res.message);
				}
            })
			.catch(console.error);
		}
	}

</script>
</html>
